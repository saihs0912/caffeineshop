"use strict";(self["webpackChunkcaffeineshop"]=self["webpackChunkcaffeineshop"]||[]).push([[352],{8352:function(t,e,l){l.r(e),l.d(e,{default:function(){return ot}});var d=l(6768),s=l(4232);const a={class:"container"},o={class:"row"},r={class:"col-12"},n={class:"mt-4 mb-4"},i={class:"container"},c={class:"row justify-content-center"},u={class:"col-lg-12 col-md-12 col-sm-12 col-12 py-2 px-0 fs-5"},k={class:"col-lg-12 col-md-12 col-sm-12 col-12 pt-3 px-0 pb-5"},b={class:"card mt-3"},L={class:"card-header"},p={class:"container"},m={class:"row"},v={class:"col-lg-8 col-md-8 col-sm-8 col-12 px-0"},y={class:"col-lg-4 col-md-4 col-sm-4 col-12 px-0 text-lg-end text-md-end text-sm-end text-start py-lg-0 py-md-0 py-sm-0 py-3"},g={key:1,class:"border border-brown rounded p-1 align-items-end mt-1 btn",style:{cursor:"text"}},h={class:"card-body"},f={class:"container"},x={class:"row"},w={class:"col-lg-7 col-md-7 col-sm-12 col-12 px-0"},_={class:"border rounded overflow-hidden mb-3"},C={class:"table mb-0 product-table"},I={class:"border-0",style:{width:"80px"}},$=["src","alt"],P={class:"border-0"},E={class:"list-group-horizontal d-flex flex-wrap order-list ps-0"},M={class:"list-group-item border-0 pt-0"},F={class:"list-group-item border-0 d-flex align-items-center"},X={class:"list-group-item border-0 d-flex align-items-center"},O={class:"list-group-item border-0"},W=["onClick","disabled"],A={colspan:"2",class:"text-end"},q={class:"fs-4 text-success fw-bold"},z={key:0,class:"d-block text-danger"},K={class:"col-lg-5 col-md-5 col-sm-12 col-12 px-0"},T={class:"border rounded overflow-hidden"},j={class:"table mb-0"},D={class:"border-0"},Q={class:"border-0"},U={class:"border-0"},B={class:"border-0"},G={class:"border-0"};function H(t,e,l,H,J,N){const R=(0,d.g2)("loading-modal"),S=(0,d.g2)("router-link"),V=(0,d.g2)("already-paid");return(0,d.uX)(),(0,d.CE)(d.FK,null,[(0,d.bF)(R,{active:J.isLoading},null,8,["active"]),(0,d.Lk)("div",a,[(0,d.Lk)("div",o,[(0,d.Lk)("div",r,[(0,d.Lk)("div",n,[(0,d.bF)(S,{to:"/",style:{"text-decoration":"none"}},{default:(0,d.k6)(()=>[...e[1]||(e[1]=[(0,d.eW)("首頁",-1)])]),_:1}),e[2]||(e[2]=(0,d.eW)(" > ",-1)),e[3]||(e[3]=(0,d.Lk)("span",null,"訂單明細",-1))]),e[15]||(e[15]=(0,d.Lk)("h1",null,"訂單明細",-1)),(0,d.Lk)("div",i,[(0,d.Lk)("div",c,[(0,d.Lk)("div",u,[(0,d.bF)(S,{to:"/order",style:{"text-decoration":"none"}},{default:(0,d.k6)(()=>[...e[4]||(e[4]=[(0,d.Lk)("i",{class:"bi bi-arrow-left-square-fill"},null,-1),(0,d.eW)(" 回到訂單列表",-1)])]),_:1})]),(0,d.Lk)("div",k,[(0,d.Lk)("div",b,[(0,d.Lk)("div",L,[(0,d.Lk)("div",p,[(0,d.Lk)("div",m,[(0,d.Lk)("div",v,[(0,d.Lk)("span",null,"訂購日期："+(0,s.v_)(t.$num.date(J.order.create_at)),1),e[5]||(e[5]=(0,d.Lk)("br",null,null,-1)),(0,d.Lk)("span",null,"訂單編號："+(0,s.v_)(J.order.id),1)]),(0,d.Lk)("div",y,[J.order.is_paid?((0,d.uX)(),(0,d.CE)("span",g,(0,s.v_)(t.$num.date(J.order.paid_date))+"已付款",1)):((0,d.uX)(),(0,d.CE)("button",{key:0,class:"btn btn-lg btn-brown",type:"button",onClick:e[0]||(e[0]=t=>N.openPaidModal(J.order.id))}," 立即付款 "))])])])]),(0,d.Lk)("div",h,[(0,d.Lk)("div",f,[(0,d.Lk)("div",x,[(0,d.Lk)("div",w,[(0,d.Lk)("div",_,[(0,d.Lk)("table",C,[e[8]||(e[8]=(0,d.Lk)("thead",null,[(0,d.Lk)("tr",null,[(0,d.Lk)("th",{colspan:"2",class:"bg-secondary text-white text-center"}," 訂購商品 ")])],-1)),(0,d.Lk)("tbody",null,[((0,d.uX)(!0),(0,d.CE)(d.FK,null,(0,d.pI)(J.order.products,(l,a)=>((0,d.uX)(),(0,d.CE)("tr",{key:a},[(0,d.Lk)("td",I,[(0,d.Lk)("img",{class:"img-fluid",src:l.product.imageUrl,alt:l.product.title},null,8,$)]),(0,d.Lk)("td",P,[(0,d.Lk)("ul",E,[(0,d.Lk)("li",M,[(0,d.bF)(S,{class:"no-underline d-block h-100",to:{name:"product",params:{productId:l.product.id}}},{default:(0,d.k6)(()=>[(0,d.eW)((0,s.v_)(l.product.title),1)]),_:2},1032,["to"])]),(0,d.Lk)("li",F,[(0,d.Lk)("span",null,"數量："+(0,s.v_)(l.qty),1)]),(0,d.Lk)("li",X,[(0,d.Lk)("span",null,"小計："+(0,s.v_)(t.$num.currency(l.final_total)),1)]),(0,d.Lk)("li",O,[(0,d.Lk)("button",{type:"button",class:"btn btn-outline-brown btn-sm rounded-3",onClick:e=>N.addToCart(t.$http,l.product_id,1,"order"),disabled:l.product_id===J.status.loadingItem},[...e[6]||(e[6]=[(0,d.Lk)("i",{class:"bi bi-cart"},null,-1),(0,d.eW)(" 再次購買 ",-1)])],8,W)])])])]))),128)),(0,d.Lk)("tr",null,[(0,d.Lk)("td",A,[(0,d.Lk)("span",q,"總金額："+(0,s.v_)(t.$num.currency(J.order.total)),1),J.order.total<J.total?((0,d.uX)(),(0,d.CE)("div",z,[...e[7]||(e[7]=[(0,d.Lk)("span",{class:"border border-danger rounded fw-bold",style:{"font-size":"0.8rem"}},"已套用優惠券",-1)])])):(0,d.Q3)("",!0)])])])])])]),(0,d.Lk)("div",K,[(0,d.Lk)("div",T,[(0,d.Lk)("table",j,[e[14]||(e[14]=(0,d.Lk)("thead",null,[(0,d.Lk)("tr",null,[(0,d.Lk)("th",{colspan:"2",class:"bg-secondary text-white text-center"}," 訂購者資料 ")])],-1)),(0,d.Lk)("tbody",null,[(0,d.Lk)("tr",null,[e[9]||(e[9]=(0,d.Lk)("td",{class:"border-0 text-end"},"訂購人",-1)),(0,d.Lk)("td",D,(0,s.v_)(J.user.name),1)]),(0,d.Lk)("tr",null,[e[10]||(e[10]=(0,d.Lk)("td",{class:"border-0 text-end"},"地址",-1)),(0,d.Lk)("td",Q,(0,s.v_)(J.user.address),1)]),(0,d.Lk)("tr",null,[e[11]||(e[11]=(0,d.Lk)("td",{class:"border-0 text-end"},"電話",-1)),(0,d.Lk)("td",U,(0,s.v_)(J.user.tel),1)]),(0,d.Lk)("tr",null,[e[12]||(e[12]=(0,d.Lk)("td",{class:"border-0 text-end"},"Email",-1)),(0,d.Lk)("td",B,(0,s.v_)(J.user.email),1)]),(0,d.Lk)("tr",null,[e[13]||(e[13]=(0,d.Lk)("td",{class:"border-0 text-end"},"留言",-1)),(0,d.Lk)("td",G,(0,s.v_)(J.order.message),1)])])])])])])])])])])])])])])]),(0,d.bF)(V,{ref:"paidModal",sendPayInfo:J.tempId,onEmitPay:N.alreadyPaid},null,8,["sendPayInfo","onEmitPay"])],64)}const J={class:"modal fade",id:"delModal",tabindex:"-1",role:"dialog","aria-labelledby":"exampleModalLabel","aria-hidden":"true",ref:"modal"},N={class:"modal-dialog",role:"document"},R={class:"modal-content border-0"},S={class:"modal-footer"};function V(t,e,l,s,a,o){return(0,d.uX)(),(0,d.CE)("div",J,[(0,d.Lk)("div",N,[(0,d.Lk)("div",R,[e[2]||(e[2]=(0,d.Lk)("div",{class:"modal-header bg-brown text-white"},[(0,d.Lk)("h5",{class:"modal-title"},[(0,d.Lk)("span",null,"付款")]),(0,d.Lk)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1)),e[3]||(e[3]=(0,d.Lk)("div",{class:"modal-body"},"確定要付款嗎？",-1)),(0,d.Lk)("div",S,[e[1]||(e[1]=(0,d.Lk)("button",{type:"button",class:"btn btn-outline-secondary","data-bs-dismiss":"modal"}," 取消 ",-1)),(0,d.Lk)("button",{type:"button",class:"btn btn-brown",onClick:e[0]||(e[0]=e=>t.$emit("emit-pay",a.tempId))}," 確定 ")])])])],512)}var Y=l(3286),Z={name:"PayModal",data(){return{tempId:""}},props:["sendPayInfo"],emits:["emit-pay"],watch:{sendPayInfo(t,e){this.tempId=t}},mixins:[Y.A]},tt=l(1241);const et=(0,tt.A)(Z,[["render",V]]);var lt=et,dt=l(5306),st={name:"OrderDetail",head(){return{title:"訂單明細 - 咖啡因商店"}},data(){return{order:{},user:{},total:0,tempId:"",isLoading:!1,status:{loadingItem:""}}},components:{AlreadyPaid:lt},props:["sendOrder"],methods:{getOrder:dt.r$,openPaidModal(t){this.tempId=t,this.$refs.paidModal.showModal()},async alreadyPaid(t){this.$refs.paidModal.hideModal();try{this.isLoading=!0,await(0,dt.b$)(t,this.$http),this.isLoading=!1,this.getOrder(t,"orderdetail")}catch(e){console.log(e),this.isLoading=!1,this.$InformMessage(e)}},addToCart:dt.bE},created(){this.getOrder(this.$route.params.orderId,"orderdetail")}};const at=(0,tt.A)(st,[["render",H]]);var ot=at}}]);
//# sourceMappingURL=352.3249520b.js.map