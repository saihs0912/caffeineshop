"use strict";(self["webpackChunkcaffeineshop"]=self["webpackChunkcaffeineshop"]||[]).push([[80],{1814:function(e,t,a){a.d(t,{A:function(){return f}});var l=a(6768),n=a(5130),s=a(4232);const o={class:"container"},d={class:"row"},r={class:"col-12"},i={"aria-label":"Page navigation example"},u={class:"pagination justify-content-center"},m={key:0,class:"page-item"},c={key:1,class:"page-item disabled"},p=["onClick"],k={key:2,class:"page-item"},b={key:3,class:"page-item disabled"};function L(e,t,a,L,v,h){return(0,l.uX)(),(0,l.CE)("div",o,[(0,l.Lk)("div",d,[(0,l.Lk)("div",r,[(0,l.Lk)("nav",i,[(0,l.Lk)("ul",u,[a.pages.has_pre?((0,l.uX)(),(0,l.CE)("li",m,[(0,l.Lk)("a",{class:"page-link",href:"#","aria-label":"Previous",onClick:t[0]||(t[0]=(0,n.D$)(e=>h.updatePage(a.pages.current_page-1),["prevent"]))},[...t[2]||(t[2]=[(0,l.Lk)("span",{"aria-hidden":"true"},"«",-1)])])])):((0,l.uX)(),(0,l.CE)("li",c,[...t[3]||(t[3]=[(0,l.Lk)("span",{class:"page-link","aria-hidden":"true"},"«",-1)])])),((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(a.pages.total_pages,e=>((0,l.uX)(),(0,l.CE)("li",{class:(0,s.C4)(["page-item",{active:e===a.pages.current_page}]),key:e},[(0,l.Lk)("a",{class:"page-link",href:"#",onClick:(0,n.D$)(t=>h.updatePage(e),["prevent"])},(0,s.v_)(e),9,p)],2))),128)),a.pages.has_next?((0,l.uX)(),(0,l.CE)("li",k,[(0,l.Lk)("a",{class:"page-link",href:"#","aria-label":"Next",onClick:t[1]||(t[1]=(0,n.D$)(e=>h.updatePage(a.pages.current_page+1),["prevent"]))},[...t[4]||(t[4]=[(0,l.Lk)("span",{"aria-hidden":"true"},"»",-1)])])])):((0,l.uX)(),(0,l.CE)("li",b,[...t[5]||(t[5]=[(0,l.Lk)("span",{class:"page-link","aria-hidden":"true"},"»",-1)])]))])])])])])}var v={name:"PaginationModal",props:["pages"],methods:{updatePage(e){window.scrollTo({top:0}),this.$emit("emit-page",e)}}},h=a(1241);const g=(0,h.A)(v,[["render",L]]);var f=g},4699:function(e,t,a){a.r(t),a.d(t,{default:function(){return T}});var l=a(6768),n=a(4232);const s={class:"table mt-4"},o={key:0,class:"text-danger"},d={key:1,class:"text-success"},r={class:"btn-group"},i=["onClick"],u=["onClick"];function m(e,t,a,m,c,p){const k=(0,l.g2)("loading-modal"),b=(0,l.g2)("order-modal"),L=(0,l.g2)("del-modal"),v=(0,l.g2)("pagination-modal");return(0,l.uX)(),(0,l.CE)(l.FK,null,[(0,l.bF)(k,{active:c.isLoading},null,8,["active"]),t[1]||(t[1]=(0,l.Lk)("h1",null,"訂單管理",-1)),(0,l.Lk)("div",null,[(0,l.Lk)("table",s,[t[0]||(t[0]=(0,l.Lk)("thead",null,[(0,l.Lk)("tr",null,[(0,l.Lk)("th",null,"結單日期"),(0,l.Lk)("th",null,"訂購者"),(0,l.Lk)("th",null,"訂單編號"),(0,l.Lk)("th",null,"是否已付款"),(0,l.Lk)("th",null,"總金額"),(0,l.Lk)("th",null,"編輯")])],-1)),(0,l.Lk)("tbody",null,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(c.orderList,t=>((0,l.uX)(),(0,l.CE)("tr",{key:t.id},[(0,l.Lk)("td",null,(0,n.v_)(e.$num.date(t.create_at)),1),(0,l.Lk)("td",null,(0,n.v_)(t.user.name),1),(0,l.Lk)("td",null,(0,n.v_)(t.id),1),(0,l.Lk)("td",null,[0==t.is_paid?((0,l.uX)(),(0,l.CE)("span",o,"尚未付款")):((0,l.uX)(),(0,l.CE)("span",d,(0,n.v_)(e.$num.date(t.paid_date))+"付款",1))]),(0,l.Lk)("td",null,(0,n.v_)(e.$num.currency(t.total)),1),(0,l.Lk)("td",null,[(0,l.Lk)("div",r,[(0,l.Lk)("button",{class:"btn btn-outline-primary btn-sm edit",onClick:e=>p.openOrderModal(t)},null,8,i),(0,l.Lk)("button",{class:"btn btn-outline-danger btn-sm del",onClick:e=>p.openDelModal(t)},null,8,u)])])]))),128))])])]),(0,l.bF)(b,{ref:"orderModal",order:c.tempOrder,resetNum:c.num,onSendOrder:p.updateOrder},null,8,["order","resetNum","onSendOrder"]),(0,l.bF)(L,{ref:"delModal",item:c.tempOrder,onDelItem:p.delOrder},null,8,["item","onDelItem"]),(0,l.bF)(v,{pages:c.pagination,onEmitPage:p.getOrderList},null,8,["pages","onEmitPage"])],64)}var c=a(5130);const p={class:"modal fade",id:"couponModal",tabindex:"-1",role:"dialog","aria-labelledby":"exampleModalLabel","aria-hidden":"true",ref:"modal"},k={class:"modal-dialog",role:"document"},b={class:"modal-content",style:{height:"80vh"}},L={class:"modal-header"},v={class:"modal-body"},h={class:"btn-group d-block text-center"},g={class:"overflow-y-auto"},f={class:"mb-3"},C={class:"mb-3"},y={class:"mb-3"},_={key:0,class:"text-danger fs-5"},O={class:"mb-3"},E={class:"fs-3"},w={class:"mb-3"},x={class:"overflow-y-auto"},M={class:"mb-3"},X={class:"mb-3"},P={class:"mb-3"},$={class:"mb-3"},D={class:"overflow-y-auto"},A={class:"table"},F={key:0,style:{"font-size":"0.8rem"},class:"text-success"},I={class:"modal-footer"};function J(e,t,a,s,o,d){return(0,l.uX)(),(0,l.CE)("div",p,[(0,l.Lk)("div",k,[(0,l.Lk)("div",b,[(0,l.Lk)("div",L,[t[12]||(t[12]=(0,l.Lk)("h5",{class:"modal-title",id:"exampleModalLabel"},"訂單編輯",-1)),(0,l.Lk)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close",onClick:t[0]||(t[0]=e=>o.num=0)})]),(0,l.Lk)("div",v,[(0,l.Lk)("div",h,[(0,l.Lk)("button",{type:"button",class:(0,n.C4)(["btn btn-outline-brown",{active:0===o.num}]),onClick:t[1]||(t[1]=e=>d.showBody(0))}," 訂單資料 ",2),(0,l.Lk)("button",{type:"button",class:(0,n.C4)(["btn btn-outline-brown",{active:1===o.num}]),onClick:t[2]||(t[2]=e=>d.showBody(1))}," 用戶資料 ",2),(0,l.Lk)("button",{type:"button",class:(0,n.C4)(["btn btn-outline-brown",{active:2===o.num}]),onClick:t[3]||(t[3]=e=>d.showBody(2))}," 訂購商品 ",2)]),(0,l.bo)((0,l.Lk)("div",g,[(0,l.Lk)("div",f,[t[13]||(t[13]=(0,l.Lk)("label",{for:"date"},"訂單日期",-1)),(0,l.bo)((0,l.Lk)("input",{type:"date",class:"form-control",id:"date","onUpdate:modelValue":t[4]||(t[4]=e=>o.create_at=e)},null,512),[[c.Jo,o.create_at]])]),(0,l.Lk)("div",C,[(0,l.Lk)("span",null,"訂單編號："+(0,n.v_)(o.tempOrder.id),1)]),(0,l.Lk)("div",y,[!0===o.tempOrder.is_paid?((0,l.uX)(),(0,l.CE)("span",_,"買方已於"+(0,n.v_)(e.$num.date(o.tempOrder.paid_date))+"付款",1)):(0,l.Q3)("",!0)]),(0,l.Lk)("div",O,[(0,l.Lk)("span",E,"總金額："+(0,n.v_)(e.$num.currency(o.tempOrder.total)),1)]),(0,l.Lk)("div",w,[t[14]||(t[14]=(0,l.Lk)("label",{for:"message"},"訂單留言",-1)),(0,l.bo)((0,l.Lk)("textarea",{name:"",id:"message",class:"form-control","onUpdate:modelValue":t[5]||(t[5]=e=>o.tempOrder.message=e),cols:"30",role:"10"},null,512),[[c.Jo,o.tempOrder.message]])])],512),[[c.aG,0===o.num]]),(0,l.bo)((0,l.Lk)("div",x,[(0,l.Lk)("div",M,[t[15]||(t[15]=(0,l.Lk)("label",{for:"date"},"姓名",-1)),(0,l.bo)((0,l.Lk)("input",{type:"text",class:"form-control",id:"name","onUpdate:modelValue":t[6]||(t[6]=e=>o.tempCustomer.name=e)},null,512),[[c.Jo,o.tempCustomer.name]])]),(0,l.Lk)("div",X,[t[16]||(t[16]=(0,l.Lk)("label",{for:"date"},"地址",-1)),(0,l.bo)((0,l.Lk)("input",{type:"text",class:"form-control",id:"name","onUpdate:modelValue":t[7]||(t[7]=e=>o.tempCustomer.address=e)},null,512),[[c.Jo,o.tempCustomer.address]])]),(0,l.Lk)("div",P,[t[17]||(t[17]=(0,l.Lk)("label",{for:"date"},"Email",-1)),(0,l.bo)((0,l.Lk)("input",{type:"text",class:"form-control",id:"name","onUpdate:modelValue":t[8]||(t[8]=e=>o.tempCustomer.email=e)},null,512),[[c.Jo,o.tempCustomer.email]])]),(0,l.Lk)("div",$,[t[18]||(t[18]=(0,l.Lk)("label",{for:"date"},"電話",-1)),(0,l.bo)((0,l.Lk)("input",{type:"text",class:"form-control",id:"name","onUpdate:modelValue":t[9]||(t[9]=e=>o.tempCustomer.tel=e)},null,512),[[c.Jo,o.tempCustomer.tel]])])],512),[[c.aG,1===o.num]]),(0,l.bo)((0,l.Lk)("div",D,[(0,l.Lk)("table",A,[t[20]||(t[20]=(0,l.Lk)("thead",null,[(0,l.Lk)("tr",null,[(0,l.Lk)("th",null,"商品"),(0,l.Lk)("th",null,"單價"),(0,l.Lk)("th",null,"數量"),(0,l.Lk)("th",null,"總額")])],-1)),(0,l.Lk)("tbody",null,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(o.tempOrder.products,(a,s)=>((0,l.uX)(),(0,l.CE)("tr",{key:s},[(0,l.Lk)("td",null,(0,n.v_)(a.product.title),1),(0,l.Lk)("td",null,(0,n.v_)(a.product.price),1),(0,l.Lk)("td",null,(0,n.v_)(a.qty),1),(0,l.Lk)("td",null,[(0,l.eW)((0,n.v_)(e.$num.currency(a.final_total))+" ",1),a.final_total<a.total?((0,l.uX)(),(0,l.CE)("span",F,[...t[19]||(t[19]=[(0,l.Lk)("br",null,null,-1),(0,l.eW)("已套用優惠券",-1)])])):(0,l.Q3)("",!0)])]))),128))])])],512),[[c.aG,2===o.num]])]),(0,l.Lk)("div",I,[(0,l.Lk)("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal",onClick:t[10]||(t[10]=e=>o.num=0)}," Close "),(0,l.Lk)("button",{type:"button",class:"btn btn-brown",onClick:t[11]||(t[11]=(...e)=>d.sendEdit&&d.sendEdit(...e))},"更新訂單")])])])],512)}var U=a(3286),V={name:"OrderModal",data(){return{tempOrder:{create_at:""},tempCustomer:{},tempProduct:{},create_at:"",num:0}},props:["order","resetNum"],emits:["sendOrder"],watch:{order(e,t){this.tempOrder=e,this.tempCustomer=e.user;const a=new Date(1e3*this.tempOrder.create_at).toISOString().split("T");this.create_at=a[0]},create_at(){this.tempOrder.create_at=Math.floor(new Date(this.create_at)/1e3)},resetNum(){this.num=0}},methods:{showBody(e){this.num=e},sendEdit(){this.tempOrder.user=this.tempCustomer,this.$emit("sendOrder",this.tempOrder)}},mixins:[U.A]},N=a(1241);const B=(0,N.A)(V,[["render",J]]);var K=B,S=a(8208),W=a(1814),G=a(5306),j={head(){return{title:"訂單管理"}},data(){return{orderList:[],pagination:{},isLoading:!1,tempOrder:{},num:""}},components:{OrderModal:K,DelModal:S.A,PaginationModal:W.A},methods:{getOrderList:G.n7,openOrderModal(e){this.tempOrder={...e},this.$refs.orderModal.showModal()},openDelModal(e){this.tempOrder={...e},this.$refs.delModal.showModal()},updateOrder:G.iY,delOrder:G._t},created(){this.getOrderList()}};const Q=(0,N.A)(j,[["render",m]]);var T=Q},8208:function(e,t,a){a.d(t,{A:function(){return h}});var l=a(6768),n=a(4232);const s={class:"modal fade",id:"delModal",tabindex:"-1",role:"dialog","aria-labelledby":"exampleModalLabel","aria-hidden":"true",ref:"modal"},o={class:"modal-dialog",role:"document"},d={class:"modal-content border-0"},r={class:"modal-header bg-danger text-white"},i={class:"modal-title"},u={class:"modal-body"},m={class:"text-danger"},c={class:"modal-footer"};function p(e,t,a,p,k,b){return(0,l.uX)(),(0,l.CE)("div",s,[(0,l.Lk)("div",o,[(0,l.Lk)("div",d,[(0,l.Lk)("div",r,[(0,l.Lk)("h5",i,[(0,l.Lk)("span",null,"刪除 "+(0,n.v_)(a.item.title),1)]),t[1]||(t[1]=(0,l.Lk)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},null,-1))]),(0,l.Lk)("div",u,[t[2]||(t[2]=(0,l.eW)(" 是否刪除",-1)),(0,l.Lk)("strong",m,(0,n.v_)(a.item.title),1),t[3]||(t[3]=(0,l.eW)(" (刪除後將無法恢復)。 ",-1))]),(0,l.Lk)("div",c,[t[4]||(t[4]=(0,l.Lk)("button",{type:"button",class:"btn btn-outline-secondary","data-bs-dismiss":"modal"}," 取消 ",-1)),(0,l.Lk)("button",{type:"button",class:"btn btn-danger",onClick:t[0]||(t[0]=t=>e.$emit("del-item",k.tempProduct))}," 確認刪除 ")])])])],512)}var k=a(3286),b={name:"DelModal",props:{item:{type:Object,default(){return{}}}},data(){return{tempProduct:{}}},watch:{item(){this.tempProduct=this.item}},mixins:[k.A]},L=a(1241);const v=(0,L.A)(b,[["render",p]]);var h=v}}]);
//# sourceMappingURL=80.df89ff26.js.map