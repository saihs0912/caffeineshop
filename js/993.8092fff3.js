"use strict";(self["webpackChunkcaffeineshop"]=self["webpackChunkcaffeineshop"]||[]).push([[993],{5306:function(t,e,s){s.d(e,{AS:function(){return n},Ap:function(){return L},FD:function(){return l},GW:function(){return p},Jj:function(){return d},Jv:function(){return f},QM:function(){return k},Xl:function(){return i},_t:function(){return $},b$:function(){return m},bE:function(){return r},c5:function(){return y},c8:function(){return C},e0:function(){return g},fS:function(){return u},iH:function(){return c},iY:function(){return x},k3:function(){return b},mx:function(){return v},n7:function(){return w},oo:function(){return o},r$:function(){return h}});s(4114),s(8111),s(7588);var a=s(1600);async function n(t){const e="https://vue3-course-api.hexschool.io/api/caffeineshop/products/all";try{const s=await t.get(e);return s.data.products}catch(s){const t=new Error("取得產品列表");t.original=t}}async function o(t,e){try{const s=`https://vue3-course-api.hexschool.io/api/caffeineshop/product/${e}`,a=await t.get(s);return a}catch(s){throw new Error("無法取得商品")}}async function i(t){const e="https://vue3-course-api.hexschool.io/api/caffeineshop/cart";try{const s=await this.$http.get(e),a=s.data.data;if(this.cart=a,this.cart.carts[0]?.coupon?.code&&(this.usedCoupon=this.cart.carts[0].coupon.code),this.num=a.carts.length,"check"===t)this.$emit("sendCart",this.cart);else if("cart"===t)return this.$emit("updateNum",this.num),this.cart.carts.length}catch(s){console.log(s),this.$InformMessage(s,"取得購物車資訊"),"cart"===t&&(this.err=!0)}}async function r(t,e,s,n,o){const i="https://vue3-course-api.hexschool.io/api/caffeineshop/cart";"detail"===n&&this.cartPutIn&&(this.cartPutIn=!this.cartPutIn),"list"===n&&(this.status.loadingItem=e);const r={product_id:e,qty:s};try{const e=await t.post(i,{data:r});if(console.log(e),"list"===n?this.cart=o:"detail"===n&&(this.cartPutIn=!0),"follow"!==n&&"cart"!==n)this.status.loadingItem="",this.$InformMessage(e,"商品放入購物車");else if("follow"===n||"cart"===n)return e;a.A.emit("updateCart")}catch(c){if("follow"!==n)this.status.loadingItem="",this.$InformMessage(c,"商品放入購物車");else if("follow"===n){const t=new Error("商品放入購物車");throw t.original=t,t}}}async function c(t,e){try{this.status.loadingItem=t.id;const s=`https://vue3-course-api.hexschool.io/api/caffeineshop/cart/${t.id}`,a={product_id:t.product_id,qty:t.qty};await this.$http.put(s,{data:a}),this.status.loadingItem="",this.getCart(e)}catch(s){this.status.loadingItem="",this.$InformMessage(s,"購物車更新")}}async function l(t,e){try{this.status.loadingItem=t;const s=`https://vue3-course-api.hexschool.io/api/caffeineshop/cart/${t}`;await this.$http.delete(s,{data:t}),this.status.loadingItem="",this.getCart(e)}catch(s){this.status.loadingItem="",this.$InformMessage(s,"商品刪除")}}async function d(t,e){try{const s="https://vue3-course-api.hexschool.io/api/caffeineshop/coupon",a={code:t},n=await e.post(s,{data:a});return n}catch(s){throw new Error(s)}}async function u(){const t="https://vue3-course-api.hexschool.io/api/caffeineshop/order",e=this.form;try{const s=await this.$http.post(t,{data:e});this.orderId=s.data.orderId}catch(s){this.$InformMessage(s,"送出訂單")}}async function h(t,e){this.isLoading=!0,"orderlist"===e&&(this.pageShow=!1,this.searchResult=[],this.notFound=!1,this.connectError=!1);const s=`https://vue3-course-api.hexschool.io/api/caffeineshop/order/${t}`;try{const t=await this.$http.get(s);this.isLoading=!1,"orderlist"===e?null!==t.data.order?this.searchResult.push(t.data.order):this.notFound=!0:"orderdetail"===e&&(this.order=t.data.order,this.user=t.data.order.user,Object.values(this.order.products).forEach((t,e)=>{this.total+=t.total}))}catch(a){this.isLoading=!1,this.notFound=!0}}async function p(t=1){this.pageShow=!0,this.isLoading=!0,!0===this.notFound&&(this.notFound=!1);const e=`https://vue3-course-api.hexschool.io/api/caffeineshop/orders?page=${t}`;try{const t=await this.$http.get(e);this.isLoading=!1,t.data.success&&(this.searchResult=t.data.orders,this.pagination=t.data.pagination)}catch(s){this.isLoading=!1,this.$InformMessage(s,"取得訂單列表")}}async function m(t,e){const s=`https://vue3-course-api.hexschool.io/api/caffeineshop/pay/${t}`;try{await e.post(s)}catch(a){throw new Error(a,"付款")}}async function f(){const t="https://vue3-course-api.hexschool.io/admin/signin";try{const e=await this.$http.post(t,this.user);if(e.data.success){const{token:t,expired:s}=e.data;this.$InformMessage(e,"登入"),document.cookie=`makotoToken=${t}; expires=${s}`,setTimeout(()=>{this.$router.push("/dashboard/productlist")},3e3)}}catch(e){this.$InformMessage(e,"登入")}}async function g(t=1){const e=`https://vue3-course-api.hexschool.io/api/caffeineshop/admin/products/?page=${t}`;this.isLoading=!0;try{const t=await this.$http.get(e);this.isLoading=!1,t.data.success&&(this.products=t.data.products,this.pagination=t.data.pagination)}catch(s){this.$InformMessage(s,"取得頁面資訊")}}async function b(t){this.tempProduct=t;let e="https://vue3-course-api.hexschool.io/api/caffeineshop/admin/product",s="post";this.isNew||(e=`${e}/${t.id}`,s="put");try{const t=await this.$http[s](e,{data:this.tempProduct});t.data.success&&("post"===s?this.$InformMessage(t,"商品新增"):this.$InformMessage(t,"商品更新"),this.getProducts(this.pagination.current_page)),this.$refs.productModal.hideModal()}catch(a){this.$InformMessage(a,"商品更新")}}async function k(t){try{const e=this.$refs[t].files[0],s=new FormData;s.append("file-to-upload",e);const a="https://vue3-course-api.hexschool.io/api/caffeineshop/admin/upload",n=await this.$http.post(a,s);n.data.success&&("fileInput"===t?this.tempProduct.imageUrl=n.data.imageUrl:this.tempProduct.imagesUrl.push(n.data.imageUrl))}catch(e){this.$InformMessage(e,"圖片上傳")}}async function y(t){this.tempProduct=t;const e=`https://vue3-course-api.hexschool.io/api/caffeineshop/admin/product/${t.id}`;try{const s=await this.$http.delete(e,{data:this.tempProduct});this.$InformMessage(s,`商品${t.title}刪除`),this.getProducts()}catch(s){this.$InformMessage(s,"商品刪除")}this.$refs.delModal.hideModal()}async function v(t=1){try{this.isLoading=!0;const e=`https://vue3-course-api.hexschool.io/api/caffeineshop/admin/coupons?page=${t}`,s=await this.$http.get(e);console.log(s),this.coupons=s.data.coupons,this.pagination=s.data.pagination,this.isLoading=!1}catch(e){this.isLoading=!1,this.$InformMessage(e,"取得優惠券列表")}}async function C(t){try{this.tempCoupon=t;let e="https://vue3-course-api.hexschool.io/api/caffeineshop/admin/coupon",s="post";this.isNew||(e=`${e}/${t.id}`,s="put");const a=await this.$http[s](e,{data:this.tempCoupon});"post"===s?this.$InformMessage(a,"優惠券新增"):this.$InformMessage(a,"優惠券更新"),this.$refs.couponModal.hideModal(),this.getCoupons(this.pagination.current_page)}catch(e){this.$refs.couponModal.hideModal(),this.$InformMessage(e,"更新優惠券")}}async function L(t){try{this.tempCoupon=t;const e=`https://vue3-course-api.hexschool.io/api/caffeineshop/admin/coupon/${this.tempCoupon.id}`,s=await this.$http.delete(e,{data:this.tempCoupon});this.$InformMessage(s,`優惠券${t.title}刪除`),this.$refs.delModal.hideModal(),this.getCoupons()}catch(e){this.$refs.delModal.hideModal(),this.$InformMessage(e,"優惠券刪除")}}async function w(t=1){const e=`https://vue3-course-api.hexschool.io/api/caffeineshop/admin/orders?page=${t}`;this.isLoading=!0;try{const t=await this.$http.get(e);this.isLoading=!1,this.orderList=t.data.orders,this.pagination=t.data.pagination}catch(s){this.$InformMessage(s,"取得訂單列表")}}async function x(t){this.tempOrder=t;const e=`https://vue3-course-api.hexschool.io/api/caffeineshop/admin/order/${this.tempOrder.id}`;try{await this.$http.put(e,{data:this.tempOrder}),this.$refs.orderModal.hideModal(),this.num=0,this.getOrderList(this.pagination.current_page)}catch(s){this.$InformMessage(s,"訂單更新")}}async function $(t){this.tempOrder=t;const e=`https://vue3-course-api.hexschool.io/api/caffeineshop/admin/order/${this.tempOrder.id}`;try{const t=await this.$http.delete(e,{data:this.tempOrder});this.$InformMessage(t,"訂單刪除"),this.$refs.delModal.hideModal(),this.getOrderList()}catch(s){this.$InformMessage(s,"訂單刪除")}}},8993:function(t,e,s){s.r(e),s.d(e,{default:function(){return qt}});var a=s(6768);const n={class:"navbar navbar-expand-lg navbar-light bg-light p-4",style:{"max-width":"991px"}},o={class:"container"},i={class:"row"},r={class:"col-12"},c={class:"container mb-5",style:{"max-width":"991px"}},l={class:"row justify-content-center"},d={class:"col-lg-8 col-md-10 col-sm-12 col-12"},u={class:"d-flex mx-auto justify-content-center",style:{"max-width":"300px"}},h={key:0},p={key:1};function m(t,e,s,m,f,g){const b=(0,a.g2)("router-link"),k=(0,a.g2)("checkout-process");return(0,a.uX)(),(0,a.CE)(a.FK,null,[(0,a.Lk)("nav",n,[(0,a.Lk)("div",o,[(0,a.Lk)("div",i,[(0,a.Lk)("div",r,[(0,a.bF)(b,{to:"/",class:"navbar-brand"},{default:(0,a.k6)(()=>[...e[2]||(e[2]=[(0,a.Lk)("i",{class:"bi bi-box-arrow-left"},null,-1),(0,a.eW)(" 返回",-1)])]),_:1})])])])]),(0,a.Lk)("div",c,[(0,a.Lk)("div",l,[(0,a.Lk)("div",d,[(0,a.bF)(k,{step:f.currentStep},null,8,["step"]),((0,a.uX)(),(0,a.Wv)(a.PR,null,[((0,a.uX)(),(0,a.Wv)((0,a.$y)(g.currentStepComponent),{ref:"infoForm","send-form-final":f.form,"send-cart-final":f.cart,"send-order":f.orderId,onSendCart:g.getCart,onSendData:g.getForm},null,40,["send-form-final","send-cart-final","send-order","onSendCart","onSendData"]))],1024)),(0,a.Lk)("div",u,[f.pre?((0,a.uX)(),(0,a.CE)("button",{key:0,type:"button",class:"btn btn-outline-brown m-1 py-2 px-4 fs-4",onClick:e[0]||(e[0]=(...t)=>g.preStep&&g.preStep(...t))}," 上一步 ")):(0,a.Q3)("",!0),f.currentStep!==f.totalSteps?((0,a.uX)(),(0,a.CE)("button",{key:1,type:"button",class:"btn btn-outline-brown m-1 py-2 px-4 fs-4",onClick:e[1]||(e[1]=(...t)=>g.nextStep&&g.nextStep(...t))},[3==f.currentStep?((0,a.uX)(),(0,a.CE)("span",h,"結帳")):((0,a.uX)(),(0,a.CE)("span",p,"下一步"))])):(0,a.Q3)("",!0)])])])])],64)}var f=s(4232);const g={class:"container"},b={class:"row justify-content-center"},k={class:"col-lg-9 col-md-9 col-sm-12 col-12"},y={class:"d-flex w-100 position-relative pt-4"},v={class:"w-25 text-center align-self-center"},C={key:0,class:"bi bi-check-circle bg-white fs-1 text-success"},L={key:1,class:"bi bi-circle-fill bg-white fs-4 text-success"},w={class:"w-25 text-center align-text-bottom align-self-center"},x={key:0,class:"bi bi-check-circle bg-white fs-1 text-success"},$={key:1,class:"bi bi-circle bg-white fs-4 text-secondary"},F={key:2,class:"bi bi-circle-fill bg-white fs-4 text-success"},I={class:"w-25 text-center align-self-center"},S={key:0,class:"bi bi-check-circle bg-white fs-1 text-success"},M={key:1,class:"bi bi-circle bg-white fs-4 text-secondary"},E={key:2,class:"bi bi-circle-fill bg-white fs-4 text-success"},X={class:"w-25 text-center align-self-center"},_={key:0,class:"bi bi-check-circle bg-white fs-1 text-success"},O={key:1,class:"bi bi-circle bg-white fs-4 text-secondary"},j={class:"d-flex w-100"};function P(t,e,s,n,o,i){return(0,a.uX)(),(0,a.CE)("div",g,[(0,a.Lk)("div",b,[(0,a.Lk)("div",k,[(0,a.Lk)("div",y,[e[0]||(e[0]=(0,a.Lk)("span",{class:"processline position-absolute d-block"},null,-1)),(0,a.Lk)("span",{class:"processlineDone position-absolute d-block",style:(0,f.Tr)(o.widthObj)},null,4),(0,a.Lk)("div",v,[1===s.step?((0,a.uX)(),(0,a.CE)("i",C)):s.step>1?((0,a.uX)(),(0,a.CE)("i",L)):(0,a.Q3)("",!0)]),(0,a.Lk)("div",w,[2===s.step?((0,a.uX)(),(0,a.CE)("i",x)):s.step<2?((0,a.uX)(),(0,a.CE)("i",$)):((0,a.uX)(),(0,a.CE)("i",F))]),(0,a.Lk)("div",I,[3===s.step?((0,a.uX)(),(0,a.CE)("i",S)):s.step<3?((0,a.uX)(),(0,a.CE)("i",M)):((0,a.uX)(),(0,a.CE)("i",E))]),(0,a.Lk)("div",X,[4===s.step?((0,a.uX)(),(0,a.CE)("i",_)):s.step<4?((0,a.uX)(),(0,a.CE)("i",O)):(0,a.Q3)("",!0)])]),(0,a.Lk)("div",j,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(o.stepName,(t,e)=>((0,a.uX)(),(0,a.CE)("div",{key:"step"+e,class:(0,f.C4)(["w-25 text-secondary text-center",[s.step==e+1?"fw-bolder":""]])},(0,f.v_)(t),3))),128))])])])])}var V={name:"CheckoutProcess",data(){return{widthObj:{width:""},stepName:["訂購資訊","顧客資訊","最終確認","訂購完成"]}},props:["step"],watch:{step(t,e){this.widthObj.width=`calc( 75% * ((${t} - 1) / 3))`}}},A=s(1241);const T=(0,A.A)(V,[["render",P]]);var U=T,D=s(5130);const Q={class:"mb-5 mt-5"},q={class:"border rounded-3 overflow-hidden"},N={class:"table align-middle mb-0"},J={style:{width:"80px"}},K=["src","alt"],W={class:"list-group-horizontal d-flex flex-wrap checkTotal-list ps-0 mb-0"},R={class:"list-group-item border-0 d-flex align-items-center pe-1"},z={class:"list-group-item border-0 d-flex align-items-center"},H={class:"list-group-item border-0 d-flex align-items-center"},Z=["onUpdate:modelValue","onChange","disabled"],G=["onClick"],Y={class:"container mb-4"},B={class:"row"},tt={class:"col-lg-6 col-md-6 col-sm-8 col-12 mb-5"},et={class:"input-group mb-3 mt-3"},st={key:0,class:"text-success fs-6"},at={class:"col-lg-6 col-md-6 col-sm-8 col-12 mb-5"},nt={key:0,class:"d-block fs-4 text-success mt-3"};function ot(t,e,s,n,o,i){return(0,a.uX)(),(0,a.CE)(a.FK,null,[(0,a.Lk)("div",Q,[e[4]||(e[4]=(0,a.Lk)("p",{class:"text-center fw-bolder fs-3"},"請確認商品與金額",-1)),(0,a.Lk)("div",q,[(0,a.Lk)("table",N,[(0,a.Lk)("tbody",null,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(o.cart.carts,(s,n)=>((0,a.uX)(),(0,a.CE)("tr",{key:n},[(0,a.Lk)("td",J,[(0,a.Lk)("img",{src:o.cart.carts[n].product.imageUrl,alt:s.product.title,class:"img-fluid"},null,8,K)]),(0,a.Lk)("td",null,[(0,a.Lk)("ul",W,[(0,a.Lk)("li",R,(0,f.v_)(s.product.title),1),(0,a.Lk)("li",z," 小計："+(0,f.v_)(t.$num.currency(s.final_total)),1),(0,a.Lk)("li",H,[e[2]||(e[2]=(0,a.eW)(" 數量：",-1)),(0,a.bo)((0,a.Lk)("input",{type:"number",class:"form-control","onUpdate:modelValue":t=>s.qty=t,min:"1",onChange:t=>i.updateCart(s,"check"),disabled:s.id===o.status.loadingItem},null,40,Z),[[D.Jo,s.qty,void 0,{number:!0}]])])])]),(0,a.Lk)("td",null,[(0,a.Lk)("button",{type:"button",class:"btn btn-outline-danger",onClick:t=>i.deleteCartItem(s.id,"check")},[...e[3]||(e[3]=[(0,a.Lk)("i",{class:"bi bi-trash3"},null,-1)])],8,G)])]))),128))])])])]),e[8]||(e[8]=(0,a.Lk)("hr",null,null,-1)),(0,a.Lk)("div",Y,[(0,a.Lk)("div",B,[(0,a.Lk)("div",tt,[e[5]||(e[5]=(0,a.Lk)("span",{class:"fs-4"},"套用優惠券",-1)),e[6]||(e[6]=(0,a.eW)()),e[7]||(e[7]=(0,a.Lk)("span",{class:"fs-6 text-danger"},"※ 一次限套用一張",-1)),(0,a.Lk)("div",et,[(0,a.Lk)("button",{class:"btn btn-outline-secondary",type:"button",id:"button-addon1",onClick:e[0]||(e[0]=(...t)=>i.addCouponCode&&i.addCouponCode(...t))}," 套用 "),(0,a.bo)((0,a.Lk)("input",{type:"text",class:"form-control",placeholder:"輸入優惠代碼","aria-label":"Example text with button addon","aria-describedby":"button-addon1","onUpdate:modelValue":e[1]||(e[1]=t=>o.coupon_code=t)},null,512),[[D.Jo,o.coupon_code]])]),o.cart.final_total<o.cart.total?((0,a.uX)(),(0,a.CE)("span",st,"※ 已套用優惠券")):(0,a.Q3)("",!0)]),(0,a.Lk)("div",at,[(0,a.Lk)("div",{class:(0,f.C4)(["d-block fs-4",{"text-decoration-line-through":o.cart.final_total<o.cart.total}])}," 總金額："+(0,f.v_)(o.cart.total),3),o.cart.final_total<o.cart.total?((0,a.uX)(),(0,a.CE)("div",nt," 折扣價："+(0,f.v_)(t.$num.currency(o.cart.final_total)),1)):(0,a.Q3)("",!0)])])])],64)}var it=s(5306),rt={name:"CheckTotal",data(){return{cart:{},coupon_code:"",status:{loadingItem:""}}},emits:["sendData","sendCart","sendTry"],props:{sendFormFinal:{type:Object,default(){return{}}},sendCartFinal:{type:Object,default(){return{}}},sendOrder:{type:String}},methods:{getCart:it.Xl,updateCart:it.iH,deleteCartItem:it.FD,addCouponCode:it.Jj,validateForm(){}},created(){this.getCart("check")}};const ct=(0,A.A)(rt,[["render",ot]]);var lt=ct;const dt={class:"mb-5 mt-5"},ut={class:"my-5 justify-content-center"},ht={class:"md-3 mb-3"},pt={class:"md-3 mb-3"},mt={class:"md-3 mb-3"},ft={class:"md-3 mb-3"},gt={class:"md-3 mb-3"};function bt(t,e,s,n,o,i){const r=(0,a.g2)("v-field"),c=(0,a.g2)("error-message"),l=(0,a.g2)("v-form");return(0,a.uX)(),(0,a.CE)("div",dt,[e[11]||(e[11]=(0,a.Lk)("p",{class:"text-center fw-bolder fs-3"},"請輸入購買者資料",-1)),(0,a.Lk)("div",ut,[(0,a.bF)(l,{class:"col-lg-10 col-md-10 col-sm-10 col-12 mx-auto",ref:"infoForm"},{default:(0,a.k6)(({errors:t})=>[(0,a.Lk)("div",ht,[e[6]||(e[6]=(0,a.Lk)("label",{for:"email",class:"form-label"},"Email",-1)),(0,a.bF)(r,{id:"email",name:"email",type:"email",class:(0,f.C4)(["form-control",{"is-invalid":t["email"]}]),placeholder:"請輸入 Email",rules:"email|required",modelValue:o.form.user.email,"onUpdate:modelValue":e[0]||(e[0]=t=>o.form.user.email=t),onChange:i.formSend},null,8,["class","modelValue","onChange"]),(0,a.bF)(c,{name:"email",class:"invalid-feedback"})]),(0,a.Lk)("div",pt,[e[7]||(e[7]=(0,a.Lk)("label",{for:"name",class:"form-label"},"姓名",-1)),(0,a.bF)(r,{id:"name",name:"name",type:"text",class:(0,f.C4)(["form-control",{"is-invalid":t["name"]}]),placeholder:"請輸入姓名",rules:i.isName,modelValue:o.form.user.name,"onUpdate:modelValue":e[1]||(e[1]=t=>o.form.user.name=t),onChange:i.formSend},null,8,["class","rules","modelValue","onChange"]),(0,a.bF)(c,{name:"name",class:"invalid-feedback"})]),(0,a.Lk)("div",mt,[e[8]||(e[8]=(0,a.Lk)("label",{for:"tel",class:"form-label"},"收件人電話",-1)),(0,a.bF)(r,{id:"tel",name:"tel",type:"tel",class:(0,f.C4)(["form-control",{"is-invalid":t["tel"]}]),placeholder:"請輸入電話",rules:i.isPhone,modelValue:o.form.user.tel,"onUpdate:modelValue":e[2]||(e[2]=t=>o.form.user.tel=t),onChange:i.formSend},null,8,["class","rules","modelValue","onChange"]),(0,a.bF)(c,{name:"tel",class:"invalid-feedback"})]),(0,a.Lk)("div",ft,[e[9]||(e[9]=(0,a.Lk)("label",{for:"address",class:"form-label"},"收件人地址",-1)),(0,a.bF)(r,{id:"address",name:"address",type:"text",class:(0,f.C4)(["form-control",{"is-invalid":t["address"]}]),placeholder:"請輸入地址",rules:i.isAddress,modelValue:o.form.user.address,"onUpdate:modelValue":e[3]||(e[3]=t=>o.form.user.address=t),onChange:i.formSend},null,8,["class","rules","modelValue","onChange"]),(0,a.bF)(c,{name:"address",class:"invalid-feedback"})]),(0,a.Lk)("div",gt,[e[10]||(e[10]=(0,a.Lk)("label",{for:"message",class:"form-label"},"留言",-1)),(0,a.bo)((0,a.Lk)("textarea",{name:"",id:"message",class:"form-control","onUpdate:modelValue":e[4]||(e[4]=t=>o.form.message=t),cols:"30",role:"10",onChange:e[5]||(e[5]=(...t)=>i.formSend&&i.formSend(...t))},null,544),[[D.Jo,o.form.message]])])]),_:1},512)])])}var kt={name:"CheckCustomer",data(){return{form:{user:{name:"",email:"",tel:"",address:""},message:""}}},emits:["sendData","sendCart"],props:{sendFormFinal:{type:Object,default(){return{}}},sendCartFinal:{type:Object,default(){return{}}},sendOrder:{type:String}},methods:{isName(t){const e=/^[\u4e00-\u9fa5]+$|^[A-Z][a-zA-Z\s-]+$/;return!!e.test(t)||"請輸入正確的姓名"},isPhone(t){const e=/^(09)[0-9]{8}$/;return!!e.test(t)||"請輸入正確的電話號碼"},isAddress(t){return!!t||"請輸入地址"},async validateForm(){const{valid:t}=await this.$refs.infoForm.validate();return t},formSend(){const t=this.form;this.$emit("sendData",t)}},mounted(){this.safeForm&&(this.form={...this.safeForm})}};const yt=(0,A.A)(kt,[["render",bt]]);var vt=yt;const Ct={class:"mb-5 mt-5"},Lt={class:"pb-5"},wt={class:"table"},xt={key:0},$t={class:"table"},Ft={class:"fs-2"},It={key:0,class:"text-success"};function St(t,e,s,n,o,i){return(0,a.uX)(),(0,a.CE)("div",Ct,[e[6]||(e[6]=(0,a.Lk)("p",{class:"text-center fw-bolder fs-3"},"請確認您的個人資料以及訂單內容",-1)),(0,a.Lk)("div",Lt,[(0,a.Lk)("table",wt,[(0,a.Lk)("tbody",null,[(0,a.Lk)("tr",null,[e[0]||(e[0]=(0,a.Lk)("td",null,"姓名：",-1)),(0,a.Lk)("td",null,(0,f.v_)(s.sendFormFinal.user.name),1)]),(0,a.Lk)("tr",null,[e[1]||(e[1]=(0,a.Lk)("td",null,"Email：",-1)),(0,a.Lk)("td",null,(0,f.v_)(s.sendFormFinal.user.email),1)]),(0,a.Lk)("tr",null,[e[2]||(e[2]=(0,a.Lk)("td",null,"地址：",-1)),(0,a.Lk)("td",null,(0,f.v_)(s.sendFormFinal.user.address),1)]),(0,a.Lk)("tr",null,[e[3]||(e[3]=(0,a.Lk)("td",null,"電話：",-1)),(0,a.Lk)("td",null,(0,f.v_)(s.sendFormFinal.user.tel),1)]),s.sendFormFinal.message?((0,a.uX)(),(0,a.CE)("tr",xt,[e[4]||(e[4]=(0,a.Lk)("td",null,"留言：",-1)),(0,a.Lk)("td",null,(0,f.v_)(s.sendFormFinal.message),1)])):(0,a.Q3)("",!0)])])]),(0,a.Lk)("div",null,[(0,a.Lk)("table",$t,[e[5]||(e[5]=(0,a.Lk)("thead",null,[(0,a.Lk)("tr",null,[(0,a.Lk)("th",null,"商品名稱"),(0,a.Lk)("th",null,"數量"),(0,a.Lk)("th",null,"小計")])],-1)),(0,a.Lk)("tbody",null,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(s.sendCartFinal.carts,(e,s)=>((0,a.uX)(),(0,a.CE)("tr",{key:s},[(0,a.Lk)("td",null,(0,f.v_)(e.product.title),1),(0,a.Lk)("td",null,(0,f.v_)(e.qty),1),(0,a.Lk)("td",null,(0,f.v_)(t.$num.currency(e.final_total)),1)]))),128))])])]),(0,a.Lk)("div",null,[(0,a.Lk)("p",Ft,"總金額："+(0,f.v_)(t.$num.currency(s.sendCartFinal.final_total)),1),s.sendCartFinal.final_total<s.sendCartFinal.total?((0,a.uX)(),(0,a.CE)("p",It," ※ 已套用優惠券 ")):(0,a.Q3)("",!0)])])}var Mt={name:"CheckFinal",data(){return{cart:{}}},emits:["sendData","sendCart"],props:{sendFormFinal:{type:Object,default(){return{}}},sendCartFinal:{type:Object,default(){return{}}},sendOrder:{type:String}},methods:{validateForm(){}}};const Et=(0,A.A)(Mt,[["render",St]]);var Xt=Et;const _t={class:"d-flex mx-auto justify-content-center flex-lg-nowrap flex-md-nowrap flex-sm-nowrap flex-wrap"},Ot={class:"checkout-btns text-center"},jt={class:"checkout-btns text-center"},Pt={class:"checkout-btns text-center"};function Vt(t,e,s,n,o,i){return(0,a.uX)(),(0,a.CE)(a.FK,null,[e[3]||(e[3]=(0,a.Lk)("div",{class:"mb-1 mt-5"},[(0,a.Lk)("p",{class:"text-center fw-bolder fs-3 mb-5"},"感謝您的購買！"),(0,a.Lk)("p",{class:"text-center fs-5"},"接下來您可以...")],-1)),(0,a.Lk)("div",_t,[(0,a.Lk)("div",Ot,[(0,a.Lk)("button",{type:"button",class:"btn btn-outline-brown m-1 py-2 px-4 fs-4",onClick:e[0]||(e[0]=t=>i.goTo(s.sendOrder))}," 查看訂單 ")]),(0,a.Lk)("div",jt,[(0,a.Lk)("button",{type:"button",class:"btn btn-outline-brown m-1 py-2 px-4 fs-4",onClick:e[1]||(e[1]=t=>i.goTo("/shopping"))}," 回到商場 ")]),(0,a.Lk)("div",Pt,[(0,a.Lk)("button",{type:"button",class:"btn btn-outline-brown m-1 py-2 px-4 fs-4",onClick:e[2]||(e[2]=t=>i.goTo("/"))}," 回到首頁 ")])])],64)}s(4114);var At={name:"CheckOver",emits:["sendData","sendCart"],props:{sendFormFinal:{type:Object,default(){return{}}},sendCartFinal:{type:Object,default(){return{}}},sendOrder:{type:String}},methods:{validateForm(){},goTo(t){"/"===t?this.$router.push("/"):"/shopping"===t?this.$router.push("/shopping"):this.$router.push({name:"orderDetail",params:{orderId:t}})}}};const Tt=(0,A.A)(At,[["render",Vt]]);var Ut=Tt,Dt={name:"CheckPage",head(){return{title:`${this.step[this.currentStep-1]} - 顧客結帳`}},data(){return{currentStep:1,totalSteps:4,pre:!1,next:!0,cart:{},tempCart:{},form:{},cartAndForm:{},orderId:"",step:["商品與金額","購買者資料","最終確認","已完成購買"]}},components:{CheckoutProcess:U,CheckTotal:lt,CheckCustomer:vt,CheckFinal:Xt,CheckOver:Ut},props:["sendForm"],methods:{async nextStep(){if(window.scrollTo({top:0,behavior:"smooth"}),this.$refs.infoForm.validateForm()){const t=await this.$refs.infoForm.validateForm();if(!t)return}this.currentStep<this.totalSteps&&this.currentStep++,4===this.currentStep&&this.createOrder(),1===this.currentStep||4===this.currentStep?this.pre=!1:this.pre=!0},preStep(){window.scrollTo({top:0,behavior:"smooth"}),this.currentStep>1&&this.currentStep--,1===this.currentStep&&(this.pre=!1)},getCart(t){this.cart=t},getForm(t){this.form=t},createOrder:it.fS},computed:{currentStepComponent(){return["CheckTotal","CheckCustomer","CheckFinal","CheckOver"][this.currentStep-1]}}};const Qt=(0,A.A)(Dt,[["render",m]]);var qt=Qt}}]);
//# sourceMappingURL=993.8092fff3.js.map