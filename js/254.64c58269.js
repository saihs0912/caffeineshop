"use strict";(self["webpackChunkcaffeineshop"]=self["webpackChunkcaffeineshop"]||[]).push([[254],{254:function(t,s,e){e.r(s),e.d(s,{default:function(){return E}});var i=e(6768),a=e(4232);const l={class:"container"},o={class:"row"},n={class:"col-12"},c={class:"mt-4 mb-4"},r={class:"container"},d={class:"row"},u={class:"col-12"},h={class:"table"},f={key:0},k={style:{width:"100px"}},p=["src"],L={class:"align-middle"},g={class:"align-middle"},v={class:"btn-group"},b=["onClick"],m={class:"align-middle"},C={class:"btn-group"},I=["onClick"];function y(t,s,e,y,w,x){const F=(0,i.g2)("router-link");return(0,i.uX)(),(0,i.CE)("div",l,[(0,i.Lk)("div",o,[(0,i.Lk)("div",n,[(0,i.Lk)("div",c,[(0,i.bF)(F,{to:"/",style:{"text-decoration":"none"}},{default:(0,i.k6)(()=>[...s[0]||(s[0]=[(0,i.eW)("首頁",-1)])]),_:1}),s[1]||(s[1]=(0,i.eW)(" > ",-1)),s[2]||(s[2]=(0,i.Lk)("span",null,"追蹤清單",-1))]),s[7]||(s[7]=(0,i.Lk)("h1",null,"追蹤清單",-1)),(0,i.Lk)("div",r,[(0,i.Lk)("div",d,[(0,i.Lk)("div",u,[(0,i.Lk)("div",null,[(0,i.Lk)("table",h,[s[6]||(s[6]=(0,i.Lk)("thead",null,[(0,i.Lk)("tr",null,[(0,i.Lk)("th"),(0,i.Lk)("th",null,"商品名稱"),(0,i.Lk)("th",null,"加入購物車"),(0,i.Lk)("th",null,"取消追蹤")])],-1)),(0,i.Lk)("tbody",null,[0===w.num?((0,i.uX)(),(0,i.CE)("tr",f,[...s[3]||(s[3]=[(0,i.Lk)("td",{colspan:"4",class:"text-center"},[(0,i.Lk)("span",{class:"fs-3 fw-bold"},"沒有追蹤商品哦...要不要加一點進來呢")],-1)])])):((0,i.uX)(!0),(0,i.CE)(i.FK,{key:1},(0,i.pI)(x.filterData,(t,e)=>((0,i.uX)(),(0,i.CE)("tr",{key:e},[(0,i.Lk)("td",null,[(0,i.Lk)("div",k,[(0,i.Lk)("img",{class:"img-fluid",src:x.filterData[e].imageUrl,alt:""},null,8,p)])]),(0,i.Lk)("td",L,[(0,i.bF)(F,{class:"no-underline d-block pt-3 pb-3",to:{name:"product",params:{productId:t.id}}},{default:(0,i.k6)(()=>[(0,i.eW)((0,a.v_)(t.title),1)]),_:2},1032,["to"])]),(0,i.Lk)("td",g,[(0,i.Lk)("div",v,[(0,i.Lk)("button",{class:"d-block btn btn-lg btn-outline-success",type:"button",onClick:s=>x.addToCart(t.id,1,!0)},[...s[4]||(s[4]=[(0,i.Lk)("i",{class:"bi bi-cart3"},null,-1)])],8,b)])]),(0,i.Lk)("td",m,[(0,i.Lk)("div",C,[(0,i.Lk)("button",{class:"d-block btn btn-lg btn-outline-danger",type:"button",onClick:s=>x.deleteFavorite(t.id)},[...s[5]||(s[5]=[(0,i.Lk)("i",{class:"bi bi-x-lg"},null,-1)])],8,I)])])]))),128))])])])])])])])])])}e(4114),e(8111),e(7588);var w=e(1874),x={name:"FollowList",data(){return{productList:[],num:0,status:{loadingItem:""},favorite:JSON.parse(localStorage.getItem("favoriteList"))||[]}},methods:{getAllProducts(){const t="https://vue3-course-api.hexschool.io/api/caffeineshop/products/all";this.$http.get(t).then(t=>{this.productList=t.data.products}).catch(t=>{this.$InformMessage(t,"取得商品")})},deleteFavorite(t){const s=this.favorite.indexOf(t);this.favorite.splice(s,1),localStorage.setItem("favoriteList",JSON.stringify(this.favorite))},addToCart:w.b},computed:{filterData(){const t=[],s=this.favorite.length;return this.productList.forEach(e=>{for(let i=0;i<s;i++)e.id===this.favorite[i]&&t.push(e)}),t}},watch:{filterData(t,s){this.num=t.length}},created(){this.getAllProducts()}},F=e(1241);const S=(0,F.A)(x,[["render",y]]);var E=S},1874:function(t,s,e){e.d(s,{b:function(){return a}});var i=e(1600);function a(t,s,e){if(!0===e){const s=this.favorite.indexOf(t);this.favorite.splice(s,1),localStorage.setItem("favoriteList",JSON.stringify(this.favorite))}const a="https://vue3-course-api.hexschool.io/api/caffeineshop/cart";this.status.loadingItem=t;const l={product_id:t,qty:s};this.$http.post(a,{data:l}).then(t=>{this.status.loadingItem="",console.log(t.data),this.$InformMessage(t,"商品放入購物車"),i.A.emit("updateCart")}).catch(t=>{this.status.loadingItem="",this.$InformMessage(t,"商品放入購物車")})}}}]);
//# sourceMappingURL=254.64c58269.js.map