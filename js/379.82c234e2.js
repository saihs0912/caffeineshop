"use strict";(self["webpackChunkcaffeineshop"]=self["webpackChunkcaffeineshop"]||[]).push([[379],{1379:function(e,t,s){s.r(t),s.d(t,{default:function(){return Oe}});var a=s(6768);const r={class:"container pt-4"},o={class:"row"},i={class:"col-lg-3 col-md-3 col-sm-12 col-12 order-md-first order-lg-first"},l={class:"col-lg-9 col-md-9 col-sm-12 col-12 order-sm-first order-first"};function c(e,t,s,c,n,d){const p=(0,a.g2)("side-menu"),u=(0,a.g2)("order-and-search"),h=(0,a.g2)("shopping-list"),g=(0,a.g2)("front-pagination");return(0,a.uX)(),(0,a.CE)("div",r,[(0,a.Lk)("div",o,[(0,a.Lk)("div",i,[(0,a.bF)(p)]),(0,a.Lk)("div",l,[(0,a.bF)(u),(0,a.bF)(h),(0,a.bF)(g)])])])}var n=s(4232),d=s(5130);const p={class:"sideBar mt-4 mb-5"},u={class:"ps-4 pe-4"},h={class:"fw-bold border-bottom d-block"},g={class:"list-group mb-4"},b=["onClick"];function k(e,t,s,r,o,i){return(0,a.uX)(),(0,a.CE)("div",p,[t[0]||(t[0]=(0,a.Lk)("h5",{class:"text-center p-2"},"找尋商品",-1)),(0,a.Lk)("div",u,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(Object.keys(o.typecategoryList),(e,t)=>((0,a.uX)(),(0,a.CE)("div",{key:t,class:"p-2"},[(0,a.Lk)("span",h,(0,n.v_)(e),1),(0,a.Lk)("ul",g,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(o.typecategoryList[e],(e,t)=>((0,a.uX)(),(0,a.CE)("li",{class:"list-group-item border-0 border-bottom ps-0 ms-3",key:t},[(0,a.Lk)("a",{href:"#",onClick:(0,d.D$)(t=>i.typeSelect(e),["prevent"]),class:"d-block"},(0,n.v_)(e),9,b)]))),128))])]))),128))])])}var m=s(1600),f={name:"SideMenu",data(){return{productList:["咖啡豆","掛耳咖啡包","罐裝茶","茶包","咖啡生活用品","茶生活用品","禮盒專區","甜點","其他"],typecategoryList:{"咖啡":["咖啡豆","掛耳咖啡包","咖啡生活用品"],"茶":["罐裝茶","茶包","茶生活用品"],"其他":["禮盒專區","甜點","其他"]}}},methods:{typeSelect(e){window.scrollTo({top:0}),m.A.emit("sendTo",e)}}},v=s(1241);const y=(0,v.A)(f,[["render",k]]);var L=y;const w={class:"container"},C={class:"row"},A={key:0,class:"col-12 col-sm-12 col-md-12 col-lg-12 px-2 py-5"},S={class:"text-center fw-bold fs-3 my-5"},x={key:1,class:"col-6 col-sm-6 col-md-6 col-lg-4 p-2 overflow-hidden"},T={class:"card h-100 shadow-sm border-0"},E=["src"],X={class:"card-body d-flex flex-column pb-0 justify-content-between"},O={class:"card-title"},N={class:"d-flex justify-content-between align-items-center"},P={class:"fw-bold text-danger"},D={class:"container pt-4 pb-3 overflow-hidden"},F={class:"row justify-content-end h-100"},I={class:"pb-2 col-12 text-end"},_={class:"btn-group"},$=["onClick","disabled"],B=["onClick"],j=["onClick"];function G(e,t,s,r,o,i){const l=(0,a.g2)("router-link");return(0,a.uX)(),(0,a.CE)("div",w,[(0,a.Lk)("div",C,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(i.filterData,(e,s)=>((0,a.uX)(),(0,a.CE)(a.FK,{key:e.id},[e.id?s+1<=10*o.page.pageNow&&s+1>10*o.page.pageNow-10?((0,a.uX)(),(0,a.CE)("div",x,[(0,a.Lk)("div",T,[(0,a.bF)(l,{class:"no-underline xs-img",to:{name:"product",params:{productId:e.id}}},{default:(0,a.k6)(()=>[(0,a.Lk)("img",{src:e.imageUrl,class:"card-img-top",alt:"商品圖片"},null,8,E)]),_:2},1032,["to"]),(0,a.Lk)("div",X,[(0,a.bF)(l,{class:"no-underline",to:{name:"product",params:{productId:e.id}}},{default:(0,a.k6)(()=>[(0,a.Lk)("h6",O,(0,n.v_)(e.title),1)]),_:2},1032,["to"]),(0,a.Lk)("div",N,[(0,a.Lk)("span",P,(0,n.v_)(e.price)+" 元",1)])]),(0,a.Lk)("div",D,[(0,a.Lk)("div",F,[(0,a.Lk)("div",I,[(0,a.Lk)("div",_,[(0,a.Lk)("button",{type:"button",class:"d-block btn m-1 rounded-circle shadow border-0 text-center cart btn-danger",onClick:t=>i.addToCart(e.id,1),disabled:e.id===o.status.loadingItem},null,8,$),-1===o.favorite.indexOf(e.id)?((0,a.uX)(),(0,a.CE)("button",{key:0,type:"button",class:"d-block btn m-1 rounded-circle shadow border-0 text-center heart",onClick:t=>i.editFavorite(e.id)},null,8,B)):((0,a.uX)(),(0,a.CE)("button",{key:1,type:"button",class:"d-block btn m-1 rounded-circle shadow border-0 text-center heart-fill",onClick:t=>i.editFavorite(e.id)},null,8,j))])])])])])])):(0,a.Q3)("",!0):((0,a.uX)(),(0,a.CE)("div",A,[(0,a.Lk)("p",S,[(0,a.eW)((0,n.v_)(e.title)+" ",1),t[0]||(t[0]=(0,a.Lk)("i",{class:"bi bi-search"},null,-1))])]))],64))),128))])])}s(4114),s(8111),s(2489);var K=s(1874),M=s(1510),J={name:"ShoppingList",data(){return{productList:[],copyList:[],cateGory:"",cacheSearch:"",order:{},afterPrice:!1,status:{loadingItem:""},page:{pageTotal:0,pageNow:1},widthSize:"",favorite:JSON.parse(localStorage.getItem("favoriteList"))||[]}},computed:{filterData(){let e=[...this.copyList];if(this.cateGory&&(e=e.filter(e=>e.category===this.cateGory)),this.cacheSearch){const t=this.cacheSearch.toLowerCase();e=e.filter(e=>e.title.toLowerCase().includes(t))}if(this.order)if("price"===this.order.type&&0!==e.length)e.sort((e,t)=>"asc"===this.order.order?e.price-t.price:t.price-e.price);else if("date"===this.order.type&&0!==e.length)return e=[...e],"asc"===this.order.order?[...e]:[...e].reverse();if(0===e.length){const t={title:"唉呀...商品不存在"};e.push(t)}return e}},watch:{filterData(){this.page.pageTotal=Math.ceil(this.filterData.length/10),this.page.pageNow>this.page.pageTotal&&(this.page.pageNow=this.page.pageTotal),0===this.page.pageTotal&&(this.page.pageNow=1),m.A.emit("sendPage",this.page);let e="";e=!(1===this.filterData.length&&!this.filterData[0].id),m.A.emit("sendResult",e)}},methods:{addToCart:K.b,editFavorite(e){const t=this.favorite.indexOf(e);-1===t?this.favorite.push(e):this.favorite.splice(t,1),localStorage.setItem("favoriteList",JSON.stringify(this.favorite))}},mounted(){m.A.on("sendTo",e=>{this.cateGory=e}),m.A.on("sendWord",e=>{this.cacheSearch=e}),m.A.on("resetAll",()=>{this.cateGory="",this.order={}}),m.A.on("sort",e=>{this.order={...e}}),m.A.on("newPage",e=>{this.page.pageNow=e,m.A.emit("updatePage",this.page.pageNow)})},unmounted(){this.productList=[]},created(){const e="https://vue3-course-api.hexschool.io/api/caffeineshop/products/all";this.$http.get(e).then(e=>{this.productList=e.data.products,this.copyList=[...this.productList],this.copyList.reverse()});const{width:t}=(0,M.lWr)();this.widthSize=t}};const W=(0,v.A)(J,[["render",G]]);var V=W;const z={class:"container mt-4"},R={class:"row"},U={class:"col-lg-6 col-md-12 col-sm-12 col-12"},q={class:"input-group mb-3"},Q={class:"col-lg-3 col-md-6 col-sm-6 col-6 align-self-center"},H={class:"d-flex w-100 mx-100 mb-3"},Y={class:"w-75 text-right text-end"},Z=["disabled"],ee={class:"btn-group-vertical w-25",role:"group","aria-label":"Vertical radio toggle button group"},te=["disabled"],se=["disabled"],ae={class:"col-lg-3 col-md-6 col-sm-6 col-6 align-self-center"},re={class:"d-flex w-100 mx-100 mb-3"},oe={class:"w-75 text-right text-end"},ie=["disabled"],le={class:"btn-group-vertical w-25",role:"group","aria-label":"Vertical radio toggle button group"},ce=["disabled"],ne=["disabled"];function de(e,t,s,r,o,i){return(0,a.uX)(),(0,a.CE)("div",z,[(0,a.Lk)("div",R,[(0,a.Lk)("div",U,[(0,a.Lk)("div",q,[(0,a.Lk)("button",{class:"btn btn-outline-secondary",type:"button",id:"button-addon1",onClick:t[0]||(t[0]=(...e)=>i.resetCategoryAndSearch&&i.resetCategoryAndSearch(...e))},"重置全部"),(0,a.bo)((0,a.Lk)("input",{type:"text",placeholder:"搜尋商品",class:"form-control","aria-describedby":"basic-addon1","onUpdate:modelValue":t[1]||(t[1]=e=>o.cacheSearch=e)},null,512),[[d.Jo,o.cacheSearch]])])]),(0,a.Lk)("div",Q,[(0,a.Lk)("div",H,[(0,a.Lk)("div",Y,[(0,a.Lk)("button",{class:"btn border-0 sort align-middle pe-2",onClick:t[2]||(t[2]=(...e)=>i.sortByPrice&&i.sortByPrice(...e)),disabled:!o.result},"價格高低排序",8,Z)]),(0,a.Lk)("div",ee,[(0,a.Lk)("button",{type:"button",disabled:!o.result,class:"btn border-0 arrow a-up",onClick:t[3]||(t[3]=e=>i.sortDesc("price"))},null,8,te),(0,a.Lk)("button",{type:"button",disabled:!o.result,class:"btn border-0 arrow a-down",onClick:t[4]||(t[4]=e=>i.sortAsc("price"))},null,8,se)])])]),(0,a.Lk)("div",ae,[(0,a.Lk)("div",re,[(0,a.Lk)("div",oe,[(0,a.Lk)("button",{class:"btn border-0 sort align-middle pe-2",onClick:t[5]||(t[5]=(...e)=>i.sortByDate&&i.sortByDate(...e)),disabled:!o.result},"上架順序排序",8,ie)]),(0,a.Lk)("div",le,[(0,a.Lk)("button",{type:"button",disabled:!o.result,class:"btn border-0 arrow a-up",onClick:t[6]||(t[6]=e=>i.sortAsc("date"))},null,8,ce),(0,a.Lk)("button",{type:"button",disabled:!o.result,class:"btn border-0 arrow a-down",onClick:t[7]||(t[7]=e=>i.sortDesc("date"))},null,8,ne)])])])])])}var pe={name:"OrderAndSearch",data(){return{cacheSearch:"",sortType:"",sortOrder:"asc",result:""}},watch:{cacheSearch(){m.A.emit("sendWord",this.cacheSearch)}},methods:{resetCategoryAndSearch(){this.cacheSearch="",m.A.emit("resetAll")},sortByPrice(){this.sortType="price",this.sortOrder="asc"===this.sortOrder?"desc":"asc",m.A.emit("sort",{type:this.sortType,order:this.sortOrder})},sortByDate(){this.sortType="date",this.sortOrder="asc"===this.sortOrder?"desc":"asc",m.A.emit("sort",{type:this.sortType,order:this.sortOrder})},sortAsc(e){this.sortType=e,this.sortOrder="asc",m.A.emit("sort",{type:this.sortType,order:this.sortOrder})},sortDesc(e){this.sortType=e,this.sortOrder="desc",m.A.emit("sort",{type:this.sortType,order:this.sortOrder})}},mounted(){m.A.on("sendResult",e=>{this.result=e})}};const ue=(0,v.A)(pe,[["render",de]]);var he=ue;const ge={class:"container mt-4 mb-4"},be={class:"row"},ke={class:"col-12"},me={"aria-label":"Page navigation example"},fe={class:"pagination justify-content-center"},ve={key:0,class:"page-item"},ye={key:1,class:"page-item disabled"},Le=["onClick"],we={key:2,class:"page-item"},Ce={key:3,class:"page-item disabled"};function Ae(e,t,s,r,o,i){return(0,a.uX)(),(0,a.CE)("div",ge,[(0,a.Lk)("div",be,[(0,a.Lk)("div",ke,[(0,a.Lk)("nav",me,[(0,a.Lk)("ul",fe,[1!==o.pages.pageNow?((0,a.uX)(),(0,a.CE)("li",ve,[(0,a.Lk)("a",{class:"page-link",href:"#","aria-label":"Previous",onClick:t[0]||(t[0]=(0,d.D$)(e=>i.updatePage(o.pages.pageNow-1),["prevent"]))},[...t[2]||(t[2]=[(0,a.Lk)("span",{"aria-hidden":"true"},"«",-1)])])])):((0,a.uX)(),(0,a.CE)("li",ye,[...t[3]||(t[3]=[(0,a.Lk)("span",{class:"page-link","aria-hidden":"true"},"«",-1)])])),((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(o.pages.pageTotal,e=>((0,a.uX)(),(0,a.CE)("li",{class:(0,n.C4)(["page-item",{active:e===o.pages.pageNow}]),key:e},[(0,a.Lk)("a",{class:"page-link",href:"#",onClick:(0,d.D$)(t=>i.updatePage(e),["prevent"])},(0,n.v_)(e),9,Le)],2))),128)),o.pages.pageNow!==o.pages.pageTotal?((0,a.uX)(),(0,a.CE)("li",we,[(0,a.Lk)("a",{class:"page-link",href:"#","aria-label":"Next",onClick:t[1]||(t[1]=(0,d.D$)(e=>i.updatePage(o.pages.pageNow+1),["prevent"]))},[...t[4]||(t[4]=[(0,a.Lk)("span",{"aria-hidden":"true"},"»",-1)])])])):((0,a.uX)(),(0,a.CE)("li",Ce,[...t[5]||(t[5]=[(0,a.Lk)("span",{class:"page-link","aria-hidden":"true"},"»",-1)])]))])])])])])}var Se={name:"FrontPagination",data(){return{pages:{}}},methods:{updatePage(e){window.scrollTo({top:0}),m.A.emit("newPage",e)}},mounted(){m.A.on("sendPage",e=>{this.pages={...e},console.log("num",e)}),m.A.on("updatePage",e=>{this.pages.pageNow=e})}};const xe=(0,v.A)(Se,[["render",Ae]]);var Te=xe,Ee={components:{SideMenu:L,ShoppingList:V,OrderAndSearch:he,FrontPagination:Te}};const Xe=(0,v.A)(Ee,[["render",c]]);var Oe=Xe},1874:function(e,t,s){s.d(t,{b:function(){return r}});var a=s(1600);function r(e,t,s){if(!0===s){const t=this.favorite.indexOf(e);this.favorite.splice(t,1),localStorage.setItem("favoriteList",JSON.stringify(this.favorite))}const r="https://vue3-course-api.hexschool.io/api/caffeineshop/cart";this.status.loadingItem=e;const o={product_id:e,qty:t};this.$http.post(r,{data:o}).then(e=>{this.status.loadingItem="",console.log(e.data),this.$InformMessage(e,"商品放入購物車"),a.A.emit("updateCart")}).catch(e=>{this.status.loadingItem="",this.$InformMessage(e,"商品放入購物車")})}}}]);
//# sourceMappingURL=379.82c234e2.js.map