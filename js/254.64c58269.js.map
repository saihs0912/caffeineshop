{"version":3,"file":"js/254.64c58269.js","mappings":"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","sources":["webpack://caffeineshop/./src/views/front/FollowList.vue","webpack://caffeineshop/./src/views/front/FollowList.vue?5191","webpack://caffeineshop/./src/methods/cartMethods.js"],"sourcesContent":["<template>\r\n    <div class=\"container\">\r\n        <div class=\"row\">\r\n            <div class=\"col-12\">\r\n                <div class=\"mt-4 mb-4\">\r\n                    <router-link to=\"/\" style=\"text-decoration: none;\">首頁</router-link> > <span>追蹤清單</span>\r\n                </div>\r\n                <h1>追蹤清單</h1>\r\n                <div class=\"container\">\r\n                    <div class=\"row\">\r\n                        <div class=\"col-12\">\r\n                          <div>\r\n                            <table class=\"table\">\r\n                              <thead>\r\n                                <tr>\r\n                                  <th></th>\r\n                                  <th>商品名稱</th>\r\n                                  <th>加入購物車</th>\r\n                                  <th>取消追蹤</th>\r\n                                </tr>\r\n                              </thead>\r\n                              <tbody>\r\n                                <tr v-if=\"num === 0\">\r\n                                  <td colspan=\"4\" class=\"text-center\">\r\n                                    <span class=\"fs-3 fw-bold\">沒有追蹤商品哦...要不要加一點進來呢</span>\r\n                                  </td>\r\n                                </tr>\r\n                                <template v-else>\r\n                                  <tr v-for=\"(item, i) in filterData\" :key=\"i\">\r\n                                  <td><div style=\"width: 100px;\"><img class=\"img-fluid\" :src=\"filterData[i].imageUrl\" alt=\"\"></div></td>\r\n                                  <td class=\"align-middle\"><router-link class=\"no-underline d-block pt-3 pb-3\" :to=\"{ name: 'product', params: { productId: item.id } }\">{{ item.title }}</router-link></td>\r\n                                  <td class=\"align-middle\">\r\n                                    <div class=\"btn-group\">\r\n                                      <button class=\"d-block btn btn-lg btn-outline-success\" type=\"button\" @click=\"addToCart(item.id, 1, true)\"><i class=\"bi bi-cart3\"></i></button>\r\n                                    </div>\r\n                                  </td>\r\n                                  <td class=\"align-middle\">\r\n                                    <div class=\"btn-group\">\r\n                                      <button class=\"d-block btn btn-lg btn-outline-danger\" type=\"button\" @click=\"deleteFavorite(item.id)\"><i class=\"bi bi-x-lg\"></i></button>\r\n                                    </div>\r\n                                  </td>\r\n                                </tr>\r\n                                </template>\r\n                              </tbody>\r\n                            </table>\r\n                          </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport { addToCart } from '@/methods/cartMethods'\r\n\r\nexport default {\r\n  name: 'FollowList',\r\n  data () {\r\n    return {\r\n      productList: [],\r\n      num: 0,\r\n      status: {\r\n        loadingItem: ''\r\n      },\r\n      favorite: JSON.parse(localStorage.getItem('favoriteList')) || []\r\n    }\r\n  },\r\n  methods: {\r\n    getAllProducts () {\r\n      const api = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/products/all`\r\n      this.$http.get(api)\r\n        .then(res => {\r\n          this.productList = res.data.products\r\n        })\r\n        .catch(err => {\r\n          this.$InformMessage(err, '取得商品')\r\n        })\r\n    },\r\n    deleteFavorite (id) {\r\n      const favoriteId = this.favorite.indexOf(id)\r\n      this.favorite.splice(favoriteId, 1)\r\n      localStorage.setItem('favoriteList', JSON.stringify(this.favorite))\r\n    },\r\n    addToCart\r\n  },\r\n  computed: {\r\n    filterData () {\r\n      const result = []\r\n      const num = this.favorite.length\r\n      this.productList.forEach(item => {\r\n        for (let i = 0; i < num; i++) {\r\n          if (item.id === this.favorite[i]) result.push(item)\r\n        }\r\n      })\r\n      return result\r\n    }\r\n  },\r\n  watch: {\r\n    filterData (newNum, oldNum) {\r\n      this.num = newNum.length\r\n    }\r\n  },\r\n  created () {\r\n    this.getAllProducts()\r\n  }\r\n}\r\n</script>\r\n","import { render } from \"./FollowList.vue?vue&type=template&id=a143d4cc\"\nimport script from \"./FollowList.vue?vue&type=script&lang=js\"\nexport * from \"./FollowList.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import emitter from './emitter'\r\n\r\nexport function addToCart (id, num, favor) {\r\n  if (favor === true) {\r\n    const favoriteId = this.favorite.indexOf(id)\r\n    this.favorite.splice(favoriteId, 1)\r\n    localStorage.setItem('favoriteList', JSON.stringify(this.favorite))\r\n  }\r\n  const api = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/cart`\r\n  this.status.loadingItem = id\r\n  const cart = {\r\n    product_id: id,\r\n    qty: num\r\n  }\r\n  this.$http.post(api, { data: cart })\r\n    .then(res => {\r\n      this.status.loadingItem = ''\r\n      console.log(res.data)\r\n      this.$InformMessage(res, '商品放入購物車')\r\n      emitter.emit('updateCart')\r\n    })\r\n    .catch(err => {\r\n      this.status.loadingItem = ''\r\n      this.$InformMessage(err, '商品放入購物車')\r\n    })\r\n}\r\n"],"names":["class","style","_createElementBlock","_hoisted_1","_createElementVNode","_hoisted_2","_hoisted_3","_hoisted_4","_createVNode","_component_router_link","to","_cache","_hoisted_5","_hoisted_6","_hoisted_7","_hoisted_8","$data","num","_hoisted_9","colspan","_Fragment","key","_renderList","$options","filterData","item","i","_hoisted_10","src","imageUrl","alt","_hoisted_12","name","params","productId","id","title","_hoisted_13","_hoisted_14","type","onClick","$event","addToCart","_hoisted_16","_hoisted_17","deleteFavorite","data","productList","status","loadingItem","favorite","JSON","parse","localStorage","getItem","methods","getAllProducts","api","this","$http","get","then","res","products","catch","err","$InformMessage","favoriteId","indexOf","splice","setItem","stringify","computed","result","length","forEach","push","watch","newNum","oldNum","created","__exports__","render","favor","cart","product_id","qty","post","console","log","emitter","emit"],"sourceRoot":""}